<div class="page" (click)="closeAll()">
  <header class="hero" (click)="$event.stopPropagation()">
    <div class="hero-copy">
      <div class="eyebrow">Angular 16+ standalone directive</div>
      <h1>ng-auto-position</h1>
      <p class="lead">
        Auto-position dropdowns, popovers, and floating panels without Angular
        CDK. Scroll-aware, viewport-safe, and tiny enough for real apps.
      </p>

      <div class="install-card">
        <div class="install-label">Install</div>
        <code class="install-command">npm i ng-auto-position</code>
        <div class="install-alt">
          <span>pnpm add ng-auto-position</span>
          <span>yarn add ng-auto-position</span>
        </div>
      </div>

      <div class="quick-links">
        <a
          class="link-button"
          href="https://www.npmjs.com/package/ng-auto-position"
          target="_blank"
          rel="noreferrer"
        >
          npm
        </a>
        <a
          class="link-button ghost"
          href="https://github.com/roshan2197/ng-auto-position"
          target="_blank"
          rel="noreferrer"
        >
          GitHub
        </a>
      </div>

      <div class="feature-grid">
        <div class="feature-card">
          <h3>Smart Positioning</h3>
          <p>Opens above or below and clamps when visible.</p>
        </div>
        <div class="feature-card">
          <h3>Scroll Aware</h3>
          <p>Tracks the anchor even while the page moves.</p>
        </div>
        <div class="feature-card">
          <h3>Lightweight</h3>
          <p>Standalone directive with no CDK dependency.</p>
        </div>
      </div>
    </div>

    <div class="hero-demo">
      <div class="demo-card">
        <div class="demo-header">Live Demo</div>
        <div class="demo-body">
          <div class="demo-row">
            <button
              #menuButton
              class="demo-button"
              (click)="toggleMenu(); $event.stopPropagation()"
            >
              Open menu
            </button>
            @if (showMenu) {
              <div
                ngAutoPosition
                [referenceElement]="menuButton"
                [matchWidth]="true"
                [scrollableSelector]="'.menu-items'"
                [offset]="10"
                [viewportPadding]="12"
                class="menu-panel"
                (placementChange)="menuPlacement = $event"
                (click)="$event.stopPropagation()"
              >
                <div class="menu-items">
                  @for (item of menuItems; track item) {
                    <div class="menu-item">{{ item }}</div>
                  }
                </div>
              </div>
            }
            <div class="placement-pill">
              Placement: {{ menuPlacement ?? 'auto' }}
            </div>
          </div>

          <div class="demo-row">
            <button
              #infoButton
              class="demo-button ghost"
              (click)="togglePopover(); $event.stopPropagation()"
            >
              Why it feels solid
            </button>
            @if (showPopover) {
              <div
                ngAutoPosition
                [referenceElement]="infoButton"
                [offset]="12"
                placement="bottom"
                class="popover"
                (click)="$event.stopPropagation()"
              >
                <h4>Positioning rules</h4>
                <p>
                  When the anchor is on-screen, the panel clamps to the
                  viewport. When the anchor scrolls away, the panel follows it
                  naturally instead of freezing mid-air.
                </p>
              </div>
            }
          </div>
        </div>
        <div class="demo-footer">
          Try scrolling the page. Panels stay attached to their anchors.
        </div>
      </div>
    </div>
  </header>

  <section class="content">
    <div class="content-card">
      <h2>Quick Start</h2>
      <!-- <div class="code-block">
        <pre><code>import &#123; NgAutoPositionModule &#125; from 'ng-auto-position';
            @NgModule(&#123;
              imports: [NgAutoPositionModule]
            &#125;)
            export class AppModule &#123; &#125;</code></pre>
      </div> -->
      <div class="code-block">
        <pre><code>&lt;button #menuBtn&gt;Menu&lt;/button&gt;
&lt;div
  ngAutoPosition
  [referenceElement]="menuBtn"
  [offset]="8"
  [matchWidth]="true"
&gt;
  Menu content
&lt;/div&gt;</code></pre>
      </div>
    </div>

    <div class="content-card">
      <h2>Core Inputs</h2>
      <ul class="input-list">
        <li><strong>referenceElement</strong> - Direct anchor reference.</li>
        <li><strong>referenceElementId</strong> - Anchor ID fallback.</li>
        <li>
          <strong>enableAutoReposition</strong> - Track scroll and resize.
        </li>
        <li><strong>offset</strong> - Gap between the anchor and panel.</li>
        <li><strong>matchWidth</strong> - Match panel width to anchor.</li>
        <li>
          <strong>placement</strong> - Preferred top/bottom/left/right placement.
        </li>
        <li><strong>viewportPadding</strong> - Edge padding while clamping.</li>
        <li>
          <strong>trackScrollParents</strong> - Listen to scrollable containers.
        </li>
        <li><strong>scrollableSelector</strong> - Constrain inner scroll.</li>
        <li>
          <strong>hideScrollTargets</strong> - Hide scrollbars while open.
        </li>
      </ul>
    </div>
  </section>

  <section class="examples">
    <div class="content-card">
      <h2>Example: Internal Scroll Menu</h2>
      <p class="card-lead">
        A tall menu that becomes scrollable when there is not enough space in
        the viewport.
      </p>
      <div class="example-panel">
        <button
          #inlineMenuButton
          class="demo-button"
          (click)="toggleInline(); $event.stopPropagation()"
        >
          Toggle long menu
        </button>
        @if (showInline) {
          <div
            ngAutoPosition
            [referenceElement]="inlineMenuButton"
            [scrollableSelector]="'.long-menu'"
            [matchWidth]="true"
            [offset]="10"
            class="menu-panel"
            (click)="$event.stopPropagation()"
          >
            <div class="long-menu">
              <div class="menu-item">Profile</div>
              <div class="menu-item">Billing</div>
              <div class="menu-item">Workspace</div>
              <div class="menu-item">Security</div>
              <div class="menu-item">Notifications</div>
              <div class="menu-item">Integrations</div>
              <div class="menu-item">Appearance</div>
              <div class="menu-item">Keyboard shortcuts</div>
              <div class="menu-item">Sign out</div>
            </div>
          </div>
        }
      </div>
      <div class="code-block">
        <pre><code>&lt;button #inlineMenuButton&gt;Toggle long menu&lt;/button&gt;
&lt;div
  ngAutoPosition
  [referenceElement]="inlineMenuButton"
  [scrollableSelector]="'.long-menu'"
  [matchWidth]="true"
&gt;
  &lt;div class="long-menu"&gt;...&lt;/div&gt;
&lt;/div&gt;</code></pre>
      </div>
    </div>

    <div class="content-card">
      <h2>Example: Placement Options</h2>
      <p class="card-lead">
        Force a specific direction with <code>placement</code>. These are
        arranged in a single row on desktop.
      </p>
      <div class="placement-grid">
        <div class="placement-cell">
          <div class="placement-label">Top</div>
          <button
            #topExampleBtn
            class="demo-button"
            (click)="toggleTopExample(); $event.stopPropagation()"
          >
            Open top
          </button>
          @if (showTopExample) {
            <div
              ngAutoPosition
              [referenceElement]="topExampleBtn"
              placement="top"
              [offset]="10"
              class="menu-panel placement-panel"
              (click)="$event.stopPropagation()"
            >
              <div class="menu-items">
                <div class="menu-item">Top aligned</div>
                <div class="menu-item">Clamped if needed</div>
              </div>
            </div>
          }
        </div>

        <div class="placement-cell">
          <div class="placement-label">Bottom</div>
          <button
            #bottomExampleBtn
            class="demo-button"
            (click)="toggleBottomExample(); $event.stopPropagation()"
          >
            Open bottom
          </button>
          @if (showBottomExample) {
            <div
              ngAutoPosition
              [referenceElement]="bottomExampleBtn"
              placement="bottom"
              [offset]="10"
              class="menu-panel placement-panel"
              (click)="$event.stopPropagation()"
            >
              <div class="menu-items">
                <div class="menu-item">Bottom aligned</div>
                <div class="menu-item">Viewport aware</div>
              </div>
            </div>
          }
        </div>

        <div class="placement-cell">
          <div class="placement-label">Left</div>
          <button
            #leftExampleBtn
            class="demo-button"
            (click)="toggleLeftExample(); $event.stopPropagation()"
          >
            Open left
          </button>
          @if (showLeftExample) {
            <div
              ngAutoPosition
              [referenceElement]="leftExampleBtn"
              placement="left"
              [offset]="10"
              class="menu-panel placement-panel"
              (click)="$event.stopPropagation()"
            >
              <div class="menu-items">
                <div class="menu-item">Left aligned</div>
                <div class="menu-item">Auto clamp</div>
              </div>
            </div>
          }
        </div>

        <div class="placement-cell">
          <div class="placement-label">Right</div>
          <button
            #rightExampleBtn
            class="demo-button"
            (click)="toggleRightExample(); $event.stopPropagation()"
          >
            Open right
          </button>
          @if (showRightExample) {
            <div
              ngAutoPosition
              [referenceElement]="rightExampleBtn"
              placement="right"
              [offset]="10"
              class="menu-panel placement-panel"
              (click)="$event.stopPropagation()"
            >
              <div class="menu-items">
                <div class="menu-item">Right aligned</div>
                <div class="menu-item">Auto clamp</div>
              </div>
            </div>
          }
        </div>
      </div>
      <div class="code-block">
        <pre><code>&lt;button #leftBtn&gt;Open left&lt;/button&gt;
&lt;div
  ngAutoPosition
  [referenceElement]="leftBtn"
  placement="left"
&gt;
  ...
&lt;/div&gt;</code></pre>
      </div>
    </div>

    <div class="content-card">
      <h2>Example: Scroll Playground</h2>
      <p class="card-lead">
        Scroll the page to see the overlay track the anchor. When the anchor
        leaves the viewport, the overlay follows it instead of freezing.
      </p>
      <div class="scroll-playground">
        <div class="scroll-step">
          <div>Scroll the page to reach the anchor.</div>
        </div>
        <div class="scroll-step anchor-zone">
          <button
            #scrollAnchor
            class="demo-button ghost"
            (click)="toggleSticky(); $event.stopPropagation()"
          >
            Anchor in scroll
          </button>
          @if (showSticky) {
            <div
              ngAutoPosition
              [referenceElement]="scrollAnchor"
              [offset]="12"
              class="popover"
              (click)="$event.stopPropagation()"
            >
              <h4>Scroll behavior</h4>
              <p>
                The overlay stays glued to the anchor while you scroll the page.
              </p>
            </div>
          }
        </div>
        <div class="scroll-step">
          <div>Keep scrolling to push the anchor off-screen.</div>
        </div>
      </div>
      <div class="code-block">
        <pre><code>&lt;div class="scroll-playground"&gt;
  &lt;button #scrollAnchor&gt;Anchor&lt;/button&gt;
  &lt;div ngAutoPosition [referenceElement]="scrollAnchor"&gt;...&lt;/div&gt;
&lt;/div&gt;</code></pre>
      </div>
    </div>

    <div class="content-card">
      <h2>Example: Scrollable Container</h2>
      <p class="card-lead">
        Anchors inside overflow containers still work because scroll parents
        are tracked automatically.
      </p>
      <div class="container-scroll" (click)="$event.stopPropagation()">
        <div class="container-caption">
          Scrollable panel
          <span class="container-pill">overflow: auto</span>
        </div>
        <div class="container-frame">
          <div class="scroll-spacer">Scroll inside this panel.</div>
          <div class="container-anchor">
            <button
              #containerAnchor
              class="demo-button"
              (click)="toggleContainer(); $event.stopPropagation()"
            >
              Open inside container
            </button>
            @if (showContainer) {
              <div
                ngAutoPosition
                [referenceElement]="containerAnchor"
                [offset]="10"
                class="menu-panel"
                (click)="$event.stopPropagation()"
              >
                <div class="menu-items">
                  <div class="menu-item">Edit profile</div>
                  <div class="menu-item">Share</div>
                  <div class="menu-item">Archive</div>
                </div>
              </div>
            }
          </div>
          <div class="scroll-spacer">More content below.</div>
        </div>
      </div>
      <div class="code-block">
        <pre><code>&lt;div class="container-scroll"&gt;
  &lt;button #containerAnchor&gt;Open inside container&lt;/button&gt;
  &lt;div
    ngAutoPosition
    [referenceElement]="containerAnchor"
  &gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
      </div>
    </div>
  </section>
</div>
